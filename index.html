<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/image/logo.png" rel="shortcut icon" type="image/x-icon"/>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- 可选的Bootstrap主题文件（一般不用引入） -->
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">

    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="http://cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>

    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- 自定义 CSS 文件 -->
    <link rel="stylesheet" href="/css/test.css">

    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>

    <title>Killed by Vtuber</title>

    <!--------------
    <script>
        window.onload = function () {
            //获取button
            var getbot = document.getElementById("set_button");
            //json文件路径
            var url = "./json/main.json"
            //创建一个名为request的XMLHttpRequest对象用于数据交互
            var request = new XMLHttpRequest();
            //打开文件
            request.open("get", url);
            //空值
            request.send(null);
            //创建事件（加载完后发生）
            request.onload = function () {
                //如果网络数据为200执行下面语句
                if (request.status == 200) {
                    var json = JSON.parse(request.responseText);
                    console.log(json);
                    json.person.map(person => {
                        var main = document.getElementById("content");
                        main.innerHTML += `<a href="${person.url}"><div class="col-xs-6 col-sm-4 text-center content_custom"> <div class="row text-center"> <div class=" custom col-xs-6 col-sm-4"> <img src="/image/logo-top_png.png" class="img-responsive" alt="Responsive image"> <img id="setimg" src="${person.imageurl}" class="img-responsive center-block img-circle img_custom" alt="Responsive image"> <p class="p_custom">${person.time}</p></div> <div class="col-xs-6"><h3 id="setname" class="h3_custom">${person.name}</h3><p id="setcont">${person.con}</p></div></div></div></div></a>`
                        for (var i = 0; i < person.name.length; i++) {
                            //点击事件
                            getbot.onclick = function () {
                                //获取输入值
                                var getext = document.getElementById("set_txt").value;
                                //判断是否为空值
                                if (getext == null || getext == " " || getext=="") {
                                     alert("不能输入空值请重新输入") 
                                    }else{
                                        if(getext==person.name){
                                            alert("已收录")
                                        }else{
                                            alert("未收录")
                                        };
                                    };
                                console.log(person.name);
                            }
                            console.log(person.name);
                        }

                    })
                }
            }
        }
    </script>
---------->


</head>

<body>
    <div class="container">
        <h1 class="text-center">Killed by Vtuber</h1>
        <!-- Content here -->
        <div class="row text-center" id="content">
            <div class="input-group input_custom">
                <input id="settxt" type="text" class="form-control" placeholder="Search for...">
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button" id="setbot">拜祭</button>
                </span>
            </div><!-- /input-group -->
        </div>
        <div id="vcomments"></div>
    </div>
</body>



<!-- 自定义 js 文件 -->
<script>
    let persons;
    const map = new Map();
    //json文件路径
    const url = "./json/main.json";
    //创建一个名为request的XMLHttpRequest对象用于数据交互
    const request = new XMLHttpRequest();
    //打开文件
    request.open("get", url);
    //空值
    request.send(null);
    //创建事件（加载完后发生）
    request.onload = function () {
        function runoob1() {
            var json = JSON.parse(request.responseText);
            var main = document.getElementById("content");
            persons = json.person;
            for (var i = 0; i < persons.length; i++) {
                map.set(persons[i].getname, "person-" + i)
                main.innerHTML += `<a id="person-${i}" href="${persons[i].url}" target="_Blank"><div class="col-xs-6 col-sm-4 text-center content_custom"> <div class="row text-center"> <div class=" custom col-xs-6 col-sm-4"> <img src="/image/logo-top_png.png" class="img-responsive" alt="Responsive image"> <img id="setimg" src="${persons[i].imageurl}" class="img-responsive center-block img-circle img_custom" alt="Responsive image"> <p class="p_custom">${persons[i].time}</p></div> <div class="col-xs-6"><h3 id="setname" class="h3_custom">${persons[i].getname}</h3><p id="setcont">${persons[i].con}</p></div></div></div></div></a>`
            };
            console.log(persons);
        };

        function runoob2() {
            let search = document.getElementById("setbot");
            search.onclick = function () {
                let txt = document.getElementById("settxt").value;
                if (txt == null || txt == "") {
                    alert("不能输入空值请重新输入")
                } else if (map.has(txt)) {
                    let item = document.getElementById(map.get(txt))
                    item.scrollIntoView(false)
                    item.scrollIntoView({ behavior: "smooth", block: "center", inline: "nearest" })
                    alert("已经收录 链接：" + item)
                } else {
                    alert("未收录");
                };
            };
        };
        function runoob3() {
            new Valine({
                el: '#vcomments',
                appId: 'TOJAsnxGnczY7AP8q2laHpuG-gzGzoHsz',
                appKey: 'oVSbvDaNODujzYzUDiCKH2qO'
            });
        };
        runoob1();
        runoob2();
        runoob3();
    };

</script>

</html>